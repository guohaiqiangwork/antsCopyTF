<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>my_setting</title>
		<meta name="viewport" content="width=device-width, initial-scale=1,maximum-scale=1,user-scalable=no,viewport-fit=cover">
		<meta name="apple-mobile-web-app-capable" content="yes">
		<meta name="apple-mobile-web-app-status-bar-style" content="black">
		<link rel="stylesheet" href="../assers/css/mui.min.css">
		<link rel="stylesheet" href="../assers/css/common.css">
		<link rel="stylesheet" href="../assers/css/views/home.css" />
		<script src="../assers/js/rem_reset.js"></script>

		<style type="text/css">
			.vip_moudel_font {
				color: #FFC40C;
				font-size: .2rem;
				margin-top: .08rem;
				margin-left: .01rem;
			}

			.content {
				margin-top: 0.8rem;
			}

			.myAgent_list {
				margin-left: .25rem;
			}
		</style>
	</head>
	<body onselectstart="return false;" class="div_backgroun_F4">
		<header class="header_white font_size34 font_color33 title_height">
			<div class="div_display">
				<div class="width40">
					<i class="mui-action-back"><img src="../assers/image/returnButton.png" class="headder_img"></i>
				</div>
				<div style="width: 2rem;">
					我的团队
				</div>
				<div class="width40 text_right" id="explainId" style="font-size: 0.3rem;margin-right: 0.3rem;">
					说明
				</div>
			</div>
		</header>

		<div class="content" style="margin-bottom: 1.5rem;margin-top: 1.2rem;">
			<!-- 上面块 -->
			<div class="myAgent_moudel">
				<div class="div_display font_colorff font_size30  ">
					<div class="width35 text_center">
						团队人数
					</div>
					<div class="width30 text_center">
						机具采购量
					</div>
					<div class="width30 text_center">
						机具激活量
					</div>
				</div>
				<div class="div_display font_colorff font_size44 margin_top1">
					<div class="width35 text_center" id="teamsNum">
						0
					</div>
					<div class="width30 text_center" id="machinePurchase">
						0
					</div>
					<div class="width30 text_center" id="activeNum">
						0
					</div>
				</div>
				<div class="div_display font_colorff font_size26 margin_top3">
					<div class="width35 text_center">
						本月新增人数
					</div>
					<div class="width30 text_center">
						本月新增采购
					</div>
					<div class="width30 text_center">
						本月新增激活
					</div>
				</div>
				<div class="div_display font_colorff font_size36 margin_top1">
					<div class="width35 text_center" id="newAddMember">
						0
					</div>
					<div class="width30 text_center" id="newAddMachine">
						0
					</div>
					<div class="width30 text_center" id="newAddActivaeNum">
						0
					</div>
				</div>
			</div>
			<!-- 列表 -->
			<div class="myAgent_list">
				<div class="myAgentList">
					<!-- 	<div class="myAgent_list_k">
						<div class="div_display">
							<div style="width:1rem">
								<img src="' + avatar + '" class="myAgent_list_img">
							</div>
							<div class="width80">
								<div class="div_display">
									<div class="div_display width90">
										<div class="font_color33 font_size30 ">
											jklj
										</div>
										<div class="div_display vip_moudel margin_left2 margin_top1">
											<div class="margin_left1">
												<img src="../assers/image/views/vip.png" style="width: .42rem;height: .17rem;">
											</div>
											<div class="vip_moudel_font">
												3
											</div>
										</div>

									</div>

									<div class="font_size26 font_color66">
										一级
									</div>

								</div>
								<div class="div_display font_size28 font_color66 margin_top1">
									<div class="div_display width40" style="border-right: 2px solid #CCCCCC;">
										<div class="">团队总计</div>
										<div class="font_color33 font_size32 margin_left1">99
										</div>
										<div class="margin_left1">人</div>
									</div>
									<div class="div_display margin_left4">
										<div class="">月总额</div>
										<div class="font_color33 font_size32 margin_left1">44
										</div>
										<div class="margin_left1">万元</div>
									</div>
								</div>
							</div>
						</div>
					</div>

 -->
					<!-- 默认页面 -->
					<div class="myAgent_list_k">
						<div class="div_display">
							<div class="width20" style="width: 0.8rem;background-color: #EEEEEE;border-radius: 0.7rem;">

							</div>
							<div class="width80" style="margin-left: 0.3rem;">
								<div class="div_display">
									<div class="font_color33 font_size30 width70 back_gd_DC" style="width: 1.51rem;height: 0.32rem;">
										<!-- 王二狗 -->
									</div>
									<div class="back_gd_DC" style="width: 0.74rem;height: 0.26rem;margin-left: 3rem;">

									</div>
								</div>
								<div class="div_display font_size28 font_color66 margin_top1">
									<div class="div_display back_gd_DC" style="width: 1.72rem;height: 0.28rem;margin-top: 0.22rem;">
									</div>
									<div class="back_gd_DC" style="width: 2.23rem;height: 0.28rem;margin-top: 0.22rem;margin-left: 0.81rem;">
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="myAgent_list_k">
						<div class="div_display">
							<div class="width20" style="width: 0.8rem;background-color: #EEEEEE;border-radius: 0.7rem;">
							</div>
							<div class="width80" style="margin-left: 0.3rem;">
								<div class="div_display">
									<div class="font_color33 font_size30 width70 back_gd_DC" style="width: 1.51rem;height: 0.32rem;">
										<!-- 王二狗 -->
									</div>
									<div class="back_gd_DC" style="width: 0.74rem;height: 0.26rem;margin-left: 3rem;">

									</div>
								</div>
								<div class="div_display font_size28 font_color66 margin_top1">
									<div class="div_display back_gd_DC" style="width: 1.72rem;height: 0.28rem;margin-top: 0.22rem;">
									</div>
									<div class="back_gd_DC" style="width: 2.23rem;height: 0.28rem;margin-top: 0.22rem;margin-left: 0.81rem;">
									</div>
								</div>
							</div>
						</div>
					</div>
					<div class="myAgent_list_k">
						<div class="div_display">
							<div class="width20" style="width: 0.8rem;background-color: #EEEEEE;border-radius: 0.7rem;">
							</div>
							<div class="width80" style="margin-left: 0.3rem;">
								<div class="div_display">
									<div class="font_color33 font_size30 width70 back_gd_DC" style="width: 1.51rem;height: 0.32rem;">
										<!-- 王二狗 -->
									</div>
									<div class="back_gd_DC" style="width: 0.74rem;height: 0.26rem;margin-left: 3rem;">

									</div>
								</div>
								<div class="div_display font_size28 font_color66 margin_top1">
									<div class="div_display back_gd_DC" style="width: 1.72rem;height: 0.28rem;margin-top: 0.22rem;">
									</div>
									<div class="back_gd_DC" style="width: 2.23rem;height: 0.28rem;margin-top: 0.22rem;margin-left: 0.81rem;">
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>

			</div>


			<!-- 缺省页 -->
			<div id="cartDefaultId" style="display: none;">
				<div id="cartDefaultId_one">
					<img src="../assers/image/default/agent.png">
				</div>
				<div id="cartDefaultId_two">
					<span>暂无代理</span>
				</div>
			</div>
		</div>
	</body>
	<script src="../assers/js/jquery-1.11.2.min.js"></script>
	<script src="../assers/js/mui.min.js"></script>
	<script src="../assers/js/commonFun.js"></script>
	<script src="../assers/js/requestFun.js"></script>
	<script>
		(function($, doc, $$, undefined) {
			$$.init();
			var _self;
			if (window.plus) {
				plusReady();
			} else {
				doc.addEventListener('plusready', plusReady, false);
			}

			function plusReady() {
				plus.navigator.setFullscreen(false);
				//强制竖屏
				plus.screen.lockOrientation("portrait-primary");
				//强制隐藏滚动条
				plus.webview.currentWebview().setStyle({
					scrollIndicator: 'none'
				});
				_self = plus.webview.currentWebview();
				// 获取我的代理数据
				getMyAgentTeamDataCount(mui, function(data) {
					if (data.code == 200) {
						console.log(JSON.stringify(data))
						$('#teamsNum').text(data.data.teamsNum); //团队人数
						$('#machinePurchase').text(data.data.machinePurchase); //机具采购量
						$('#activeNum').text(data.data.activeNum); //机具激活量
						$('#newAddMember').text(data.data.newAddMember); //本月新增人数
						$('#newAddMachine').text(data.data.newAddMachine); //本月新增采购
						$('#newAddActivaeNum').text(data.data.newAddActivaeNum); //本月新增激活
					} else {
						tipShow(data.message);
					}
				});
				// getAgency(mui, plus.storage.getItem('memberId'), function(data) {
				// 	if (data.code == 200) {
				// 		$('#totalSum').text(data.data[0].totalSum)
				// 		$('#mySum').text(data.data[0].mySum)
				// 		$('#num').text(data.data[0].num)
				// 	} else {
				// 		tipShow(data.message);
				// 	}
				// });
				// 获取列表
				getTeam(mui, plus.storage.getItem('memberId'), function(data) {
					if (data.code == 200) {
						$(".myAgent_list_k").remove();
						var data = data.data;
						var fragmentplanList = document.createDocumentFragment();
						var avatar;
						if (data.length > 0) {
							$.each(data, function(items) {
								var avatar = data[items].avatar;
								if (!avatar) {
									avatar = "../assers/image/headPortrait.png";
								}
								var agentList =
									'<div class="myAgent_list_k" data-id=' + data[items].id + '>' +
									'<div class="div_display">' +
									'<div style="width:1rem">' +
									'<img src="' + avatar + '"  class="myAgent_list_img">' +
									'</div>' +
									'<div class="width80">' +
									'<div class="div_display">' +
									'<div class="div_display width90">' +
									'<div class="font_color33 font_size30 ">' +
									data[items].name +
									'</div>' +
									'<div class="div_display vip_moudel margin_left2 margin_top1">' +
									'<div class="margin_left1">' +
									'<img src="../assers/image/views/vip.png" style="width: .42rem;height: .17rem;">' +
									'</div>' +
									'<div class="vip_moudel_font">' +
									data[items].LEVEL +
									'</div>' +
									'</div>' +
									'</div>' +
									'<div class="font_size26 font_color66">' +
									data[items].agentName +
									'</div>' +
									'</div>' +
									'<div class="div_display font_size28 font_color66 margin_top1">' +
									'<div class="div_display width40" style="border-right: 2px solid #CCCCCC;">' +
									'<div class="">团队总计</div>' +
									'<div class="font_color33 font_size32 margin_left1">' +
									data[items].num +
									'</div>' +
									'<div class="margin_left1">人</div>' +
									'</div>' +
									'<div class="div_display margin_left4">' +
									'<div class="">月总额</div>' +
									'<div class="font_color33 font_size32 margin_left1">' +
									data[items].sum +
									'</div>' +
									'<div class="margin_left1">万元</div>' +
									'</div>' +
									'</div>' +
									'</div>' +
									'</div>' +
									'</div>';
								$(fragmentplanList).append(agentList);
							})
							$(".myAgentList").append($(fragmentplanList));
						} else {
							$('#cartDefaultId').css('display', 'block')
						}

					} else {
						tipShow(data.message);
					}
				})
			}
			/* 去代理说明页 */
			$("#explainId").on("tap", function() {
				$$.openWindow({
					url: '../pages/agentExplain.html',
					id: 'agentExplain',
					show: {
						aniShow: "slide-in-right"
					}
				});
			});

			// 立即购买
			$('.myAgentList').on('tap', '.myAgent_list_k', function() {
				$$.openWindow({
					url: '../pages/myAgentDetail.html',
					id: 'myAgentDetail',
					extras: {
						"agentID": $(this).attr('data-id')
					},
					show: {
						aniShow: "slide-in-right"
					}
				});
			})
		})(jQuery, document, mui);
	</script>

</html>
